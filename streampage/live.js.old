// 房间名映射配置
var roomMap = {
    'A': 'livetest',
    'B': 'game1',
    'C': 'game2',
    'D': 'game3',
    'm': 'vocaloid'
};

function liveplay(id){
    var roomName = roomMap[id];
    if (!roomName) {
        console.warn("Unknown room id: " + id);
        return;
    }

    setTimeout(function(){
        // alert("firstplay"+id);
        $('#wrapper').addClass('playing');
        $('#l'+id).append("<p class='playerbox'><iframe allowfullscreen='allowfullscreen' mozallowfullscreen='mozallowfullscreen' msallowfullscreen='msallowfullscreen' oallowfullscreen='oallowfullscreen' webkitallowfullscreen='webkitallowfullscreen' class='liveplayer' width='100%' height='100%' scrolling='no' frameborder='0' frameborder src='liveroom/index-dplayer.html?room="+roomName+"'></iframe></p>");
    },100)
}
function livestop()
{
    if($('#wrapper').hasClass('playing')) {
        // alert("stop");
        setTimeout(function(){
            $('.playerbox').remove();
        },500);
        $('#wrapper').removeClass('playing');}
}
$('.close').on('click',livestop);
$('#wrapper').on('click',livestop);
if(window.location.hash!=''){
    // alert(window.location.hash.substr(1));
    liveplay(window.location.hash.substr(2));
}